<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TiffinConnect - Messages</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== CSS VARIABLES ===== */
        :root {
            --primary: #4CAF50;
            --primary-dark: #388E3C;
            --secondary: #FF9800;
            --secondary-dark: #F57C00;
            --dark: #333;
            --light: #f9f9f9;
            --gray: #777;
            --light-gray: #e0e0e0;
            --success: #4CAF50;
            --warning: #FFC107;
            --danger: #F44336;
            --info: #2196F3;
            --border-radius: 10px;
            --box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }
        
        /* ===== GLOBAL STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* ===== HEADER STYLES ===== */
        header {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo span {
            color: var(--secondary);
        }
        
        .nav-links {
            display: flex;
            list-style: none;
        }
        
        .nav-links li {
            margin-left: 25px;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: var(--transition);
        }
        
        .nav-links a:hover, .nav-links a.active {
            color: var(--primary);
        }
        
        .user-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .notification-badge {
            position: relative;
            cursor: pointer;
        }
        
        .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--danger);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* ===== BUTTON STYLES ===== */
        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            background-color: var(--primary-dark);
        }
        
        .btn-secondary {
            background-color: var(--secondary);
        }
        
        .btn-secondary:hover {
            background-color: var(--secondary-dark);
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }
        
        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 0.9rem;
        }
        
        /* ===== MAIN CONTENT STYLES ===== */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 30px 0;
        }
        
        .content-section {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .section-title {
            font-size: 1.5rem;
            color: var(--dark);
        }
        
        /* ===== MESSAGE CENTER STYLES ===== */
        .message-center {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .message-list {
            border: 1px solid var(--light-gray);
            border-radius: var(--border-radius);
            overflow: hidden;
            max-height: 600px;
            overflow-y: auto;
        }
        
        .message-item {
            padding: 15px;
            border-bottom: 1px solid var(--light-gray);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .message-item:hover {
            background-color: var(--light);
        }
        
        .message-item.unread {
            background-color: #e3f2fd;
            font-weight: 500;
        }
        
        .message-item.selected {
            background-color: var(--light);
            border-left: 4px solid var(--primary);
        }
        
        .message-sender {
            font-weight: 500;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .message-preview {
            font-size: 0.9rem;
            color: var(--gray);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .message-date {
            font-size: 0.8rem;
            color: var(--gray);
            margin-top: 5px;
        }
        
        .message-detail {
            border: 1px solid var(--light-gray);
            border-radius: var(--border-radius);
            padding: 20px;
            display: flex;
            flex-direction: column;
            height: 600px;
        }
        
        .message-header {
            border-bottom: 1px solid var(--light-gray);
            padding-bottom: 15px;
            margin-bottom: 15px;
        }
        
        .message-subject {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        
        .message-meta {
            display: flex;
            justify-content: space-between;
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .message-body {
            line-height: 1.6;
            flex-grow: 1;
            overflow-y: auto;
            padding: 10px 0;
        }
        
        .message-reply {
            border-top: 1px solid var(--light-gray);
            padding-top: 15px;
            margin-top: 15px;
        }
        
        .reply-input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--light-gray);
            border-radius: 5px;
            margin-bottom: 10px;
            resize: vertical;
            min-height: 100px;
        }
        
        /* ===== CHAT INTERFACE STYLES ===== */
        .chat-container {
            display: flex;
            height: 500px;
            border: 1px solid var(--light-gray);
            border-radius: var(--border-radius);
            overflow: hidden;
        }
        
        .chat-contacts {
            width: 250px;
            border-right: 1px solid var(--light-gray);
            overflow-y: auto;
        }
        
        .chat-contact {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            cursor: pointer;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .chat-contact:hover {
            background-color: var(--light);
        }
        
        .chat-contact.active {
            background-color: var(--light);
        }
        
        .chat-contact-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--info);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .chat-messages {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .chat-header {
            padding: 15px;
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .chat-body {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .message {
            max-width: 70%;
            padding: 10px 15px;
            border-radius: 18px;
        }
        
        .message.sent {
            align-self: flex-end;
            background-color: var(--primary);
            color: white;
            border-bottom-right-radius: 5px;
        }
        
        .message.received {
            align-self: flex-start;
            background-color: var(--light);
            border-bottom-left-radius: 5px;
        }
        
        .message-time {
            font-size: 0.7rem;
            margin-top: 5px;
            opacity: 0.7;
            text-align: right;
        }
        
        .chat-footer {
            padding: 15px;
            border-top: 1px solid var(--light-gray);
            display: flex;
            gap: 10px;
        }
        
        .chat-input {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--light-gray);
            border-radius: 5px;
        }
        
        /* ===== MODAL STYLES ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 1000;
            overflow: auto;
            justify-content: center;
            align-items: flex-start;
            padding: 50px 0;
        }
        
        .modal-content {
            background-color: white;
            width: 90%;
            max-width: 600px;
            border-radius: var(--border-radius);
            padding: 30px;
            position: relative;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }
        
        /* ===== FORM STYLES ===== */
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-bottom: 15px;
        }
        
        .form-group label {
            font-weight: 500;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            padding: 12px;
            border: 1px solid var(--light-gray);
            border-radius: 5px;
        }
        
        .form-group textarea {
            min-height: 150px;
            resize: vertical;
        }
        
        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .message-center {
                grid-template-columns: 1fr;
            }
            
            .chat-container {
                flex-direction: column;
                height: 600px;
            }
            
            .chat-contacts {
                width: 100%;
                height: 150px;
                border-right: none;
                border-bottom: 1px solid var(--light-gray);
            }
        }
    </style>
</head>
<body>
    <!-- ===== HEADER SECTION ===== -->
    <header>
        <div class="container">
            <nav class="navbar">
                <div class="logo">
                    <i class="fas fa-utensils"></i>
                    <span>Tiffin</span>Connect
                </div>
                <ul class="nav-links">
                    <li><a href="index.html">Dashboard</a></li>
                    <li><a href="services.html">Services</a></li>
                    <li><a href="subscribers.html">My Subscriptions</a></li>
                    <li><a href="#">Payments</a></li>
                    <li><a href="#" class="active">Messages</a></li>
                </ul>
                <div class="user-actions">
                    <div class="notification-badge">
                      <a href="notification.html"> <i class="fas fa-bell"> </i></a>                        <span class="badge">3</span>
                    </div>
                    <div class="user-profile">
                        <div class="avatar">RS</div>
                        <span>Rahul S.</span>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- ===== MAIN CONTENT ===== -->
    <div class="container">
        <div class="main-content">
            <!-- MESSAGE CENTER SECTION -->
            <div class="content-section">
                <div class="section-header">
                    <h3 class="section-title">Message Center</h3>
                    <button class="btn btn-sm" id="compose-message-btn">Compose Message</button>
                </div>
                
                <div class="message-center">
                    <div class="message-list">
                        <div class="message-item unread selected">
                            <div class="message-sender">
                                <span>South Delight</span>
                                <span class="badge">2</span>
                            </div>
                            <div class="message-preview">Hi Rahul! We've added new dishes to our menu...</div>
                            <div class="message-date">Today, 10:30 AM</div>
                        </div>
                        <div class="message-item unread">
                            <div class="message-sender">
                                <span>Mama's Kitchen</span>
                                <span class="badge">1</span>
                            </div>
                            <div class="message-preview">Your feedback is important to us. How was...</div>
                            <div class="message-date">Yesterday, 4:15 PM</div>
                        </div>
                        <div class="message-item">
                            <div class="message-sender">TiffinConnect Support</div>
                            <div class="message-preview">Your payment was successfully processed...</div>
                            <div class="message-date">Sep 28, 2023</div>
                        </div>
                        <div class="message-item">
                            <div class="message-sender">South Delight</div>
                            <div class="message-preview">Reminder: Your subscription will renew on...</div>
                            <div class="message-date">Sep 25, 2023</div>
                        </div>
                        <div class="message-item">
                            <div class="message-sender">Mama's Kitchen</div>
                            <div class="message-preview">Holiday notice: We will be closed on...</div>
                            <div class="message-date">Sep 20, 2023</div>
                        </div>
                        <div class="message-item">
                            <div class="message-sender">TiffinConnect Support</div>
                            <div class="message-preview">Welcome to TiffinConnect! We're excited to...</div>
                            <div class="message-date">Sep 15, 2023</div>
                        </div>
                    </div>
                    
                    <div class="message-detail">
                        <div class="message-header">
                            <div class="message-subject">New Menu Items Available!</div>
                            <div class="message-meta">
                                <div>From: South Delight</div>
                                <div>Today, 10:30 AM</div>
                            </div>
                        </div>
                        <div class="message-body">
                            <p>Hi Rahul,</p>
                            <p>We're excited to let you know that we've added some new dishes to our menu based on customer feedback!</p>
                            <p>Starting next week, we'll be offering:</p>
                            <ul>
                                <li>Chettinad Chicken Curry (Saturdays)</li>
                                <li>Avial Mixed Vegetables (Tuesdays)</li>
                                <li>Mysore Masala Dosa (Thursdays)</li>
                            </ul>
                            <p>Let us know if you'd like to add any of these to your regular meal plan.</p>
                            <p>Best regards,<br>South Delight Team</p>
                        </div>
                        <div class="message-reply">
                            <textarea class="reply-input" placeholder="Type your reply here..."></textarea>
                            <button class="btn">Send Reply</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CHAT WITH VENDORS SECTION -->
            <div class="content-section">
                <div class="section-header">
                    <h3 class="section-title">Chat with Vendors</h3>
                </div>
                
                <div class="chat-container">
                    <div class="chat-contacts">
                        <div class="chat-contact active">
                            <div class="chat-contact-avatar">SD</div>
                            <div>
                                <div>South Delight</div>
                                <div style="font-size: 0.8rem; color: var(--gray);">Hi, need help with something?</div>
                            </div>
                        </div>
                        <div class="chat-contact">
                            <div class="chat-contact-avatar">MK</div>
                            <div>
                                <div>Mama's Kitchen</div>
                                <div style="font-size: 0.8rem; color: var(--gray);">Your message was received</div>
                            </div>
                        </div>
                        <div class="chat-contact">
                            <div class="chat-contact-avatar">TC</div>
                            <div>
                                <div>TiffinConnect Support</div>
                                <div style="font-size: 0.8rem; color: var(--gray);">We're here to help</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chat-messages">
                        <div class="chat-header">
                            <div class="chat-contact-avatar">SD</div>
                            <div>South Delight</div>
                        </div>
                        
                        <div class="chat-body">
                            <div class="message received">
                                Hi Rahul! How can I help you today?
                                <div class="message-time">10:15 AM</div>
                            </div>
                            <div class="message sent">
                                Hi, I wanted to know if I can change my meal timing tomorrow to 7:30 PM instead of 8:00 PM?
                                <div class="message-time">10:17 AM</div>
                            </div>
                            <div class="message received">
                                Sure, that won't be a problem. We'll deliver your tiffin by 7:30 PM tomorrow.
                                <div class="message-time">10:18 AM</div>
                            </div>
                            <div class="message sent">
                                Thanks! Also, can you please include an extra chapati tomorrow?
                                <div class="message-time">10:20 AM</div>
                            </div>
                            <div class="message received">
                                Yes, we can do that. There will be an extra charge of â‚¹10 for that. Is that okay?
                                <div class="message-time">10:22 AM</div>
                            </div>
                            <div class="message sent">
                                Yes, that's fine. Thank you!
                                <div class="message-time">10:23 AM</div>
                            </div>
                        </div>
                        
                        <div class="chat-footer">
                            <input type="text" class="chat-input" placeholder="Type your message...">
                            <button class="btn"><i class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== COMPOSE MESSAGE MODAL ===== -->
    <div class="modal" id="composeModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>Compose Message</h3>
            
            <div class="form-group">
                <label for="recipient">To:</label>
                <select id="recipient">
                    <option value="">Select a vendor</option>
                    <option value="south-delight">South Delight</option>
                    <option value="mama-kitchen">Mama's Kitchen</option>
                    <option value="support">TiffinConnect Support</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="subject">Subject:</label>
                <input type="text" id="subject" placeholder="Enter message subject">
            </div>
            
            <div class="form-group">
                <label for="message">Message:</label>
                <textarea id="message" placeholder="Type your message here..."></textarea>
            </div>
            
            <button class="btn" id="send-message-btn">Send Message</button>
        </div>
    </div>

    <!-- ===== JAVASCRIPT ===== -->
    <script>
        // ===== MODAL FUNCTIONALITY =====
        const composeBtn = document.getElementById('compose-message-btn');
        const composeModal = document.getElementById('composeModal');
        const closeModalBtn = document.querySelector('.close-modal');
        const sendMessageBtn = document.getElementById('send-message-btn');

        // Open modal
        composeBtn.addEventListener('click', function() {
            composeModal.style.display = 'flex';
        });

        // Close modal
        closeModalBtn.addEventListener('click', function() {
            composeModal.style.display = 'none';
        });

        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            if (event.target === composeModal) {
                composeModal.style.display = 'none';
            }
        });

        // Send message functionality
        sendMessageBtn.addEventListener('click', function() {
            const recipient = document.getElementById('recipient').value;
            const subject = document.getElementById('subject').value;
            const message = document.getElementById('message').value;
            
            if (!recipient) {
                alert('Please select a recipient.');
                return;
            }
            
            if (!subject || !message) {
                alert('Please fill in both subject and message fields.');
                return;
            }
            
            // In a real application, you would send this data to your server
            alert(`Message sent to ${recipient}!\nSubject: ${subject}\nMessage: ${message}`);
            
            // Clear form and close modal
            document.getElementById('recipient').value = '';
            document.getElementById('subject').value = '';
            document.getElementById('message').value = '';
            composeModal.style.display = 'none';
        });

        // ===== MESSAGE LIST FUNCTIONALITY =====
        const messageItems = document.querySelectorAll('.message-item');
        
        messageItems.forEach(item => {
            item.addEventListener('click', function() {
                // Remove selected class from all items
                messageItems.forEach(i => i.classList.remove('selected'));
                // Add selected class to clicked item
                this.classList.add('selected');
                
                // Mark as read
                this.classList.remove('unread');
                const badge = this.querySelector('.badge');
                if (badge) {
                    badge.remove();
                }
            });
        });

        // ===== CHAT FUNCTIONALITY =====
        const chatContacts = document.querySelectorAll('.chat-contact');
        const chatInput = document.querySelector('.chat-input');
        const chatSendBtn = document.querySelector('.chat-footer .btn');
        
        // Switch chat contacts
        chatContacts.forEach(contact => {
            contact.addEventListener('click', function() {
                chatContacts.forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                // In a real app, this would load the chat history for this contact
            });
        });
        
        // Send chat message
        chatSendBtn.addEventListener('click', sendChatMessage);
        
        // Send message on Enter key
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendChatMessage();
            }
        });
        
        function sendChatMessage() {
            const message = chatInput.value.trim();
            
            if (message) {
                const chatBody = document.querySelector('.chat-body');
                const messageElement = document.createElement('div');
                messageElement.className = 'message sent';
                
                const now = new Date();
                const time = now.getHours() + ':' + (now.getMinutes() < 10 ? '0' : '') + now.getMinutes();
                
                messageElement.innerHTML = `${message}<div class="message-time">${time}</div>`;
                chatBody.appendChild(messageElement);
                
                // Clear input
                chatInput.value = '';
                
                // Scroll to bottom
                chatBody.scrollTop = chatBody.scrollHeight;
                
                // Simulate reply after a short delay
                setTimeout(() => {
                    const replies = [
                        "Thanks for your message!",
                        "We'll look into that and get back to you.",
                        "Sure, we can arrange that.",
                        "Noted. We'll make the necessary changes.",
                        "Could you please provide more details?",
                        "I'll check with our team and update you shortly."
                    ];
                    
                    const replyElement = document.createElement('div');
                    replyElement.className = 'message received';
                    
                    const replyTime = new Date();
                    const replyTimeStr = replyTime.getHours() + ':' + (replyTime.getMinutes() < 10 ? '0' : '') + replyTime.getMinutes();
                    
                    replyElement.innerHTML = `${replies[Math.floor(Math.random() * replies.length)]}<div class="message-time">${replyTimeStr}</div>`;
                    chatBody.appendChild(replyElement);
                    
                    // Scroll to bottom again
                    chatBody.scrollTop = chatBody.scrollHeight;
                }, 1000);
            }
        }

        // ===== REPLY FUNCTIONALITY =====
        const replyInput = document.querySelector('.reply-input');
        const replyBtn = document.querySelector('.message-reply .btn');
        
        replyBtn.addEventListener('click', function() {
            const reply = replyInput.value.trim();
            
            if (reply) {
                alert(`Reply sent!\n\n${reply}`);
                replyInput.value = '';
                
                // In a real app, this would send the reply to the server
                // and update the message thread
            }
        });
    </script>
</body>
</html>